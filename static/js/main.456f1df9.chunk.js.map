{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","singleAdministrationVaccines","numberLoc","formatLocale","numberItIT","fmtInt","format","fmtPerc","timeLoc","timeFormatLocale","timeItIT","fmtDate","fmtMonthYear","fmtISODate","dayjs","extend","Duration","locale","useQueryParam","withDefault","BooleanParam","isEmbed","useState","indexedData","setIndexedData","dataPerArea","setDataPerArea","indexedPopulation","setIndexedPopulation","populationPerArea","setPopulationPerArea","NumberParam","populationFraction","setPopulationFraction","areas","setAreas","StringParam","area","setArea","Date","lastUpdate","setLastUpdate","lastDays","setLastDays","lastDate","setLastDate","deliveredAdministrations","setDeliveredAdministrations","deliveredAdministrations1","setDeliveredAdministrations1","requestedDoses","setRequestedDoses","doses","setDoses","administrations","setAdministrations","vaccinatedPeople","setVaccinatedPeople","vaccinatedPeople1","setVaccinatedPeople1","vaccinatedPeople2","setVaccinatedPeople2","remainingAdministrations","setRemainingAdministrations","administrationsPerDay","setAdministrationsPerDay","vaccinatedPeoplePerDay","setVaccinatedPeoplePerDay","avgAdministrationsLastDays","setAvgAdministrationsLastDays","avgVaccinatedPeopleLastDays","setAvgVaccinatedPeopleLastDays","targetMonth","setTargetMonth","getFullYear","targetYear","setTargetYear","targetDate","setTargetDate","targetAvgAdministrationsPerDay","setTargetAvgAdministrationsPerDay","nextMilestone","setNextMilestone","nextMilestoneRemainingDays","setNextMilestoneRemainingDays","nextMilestoneRemainingAdministrations","setNextMilestoneRemainingAdministrations","nextMilestoneTargetAvgAdministrationsPerDay","setNextMilestoneTargetAvgAdministrationsPerDay","isReady","setIsReady","dialogOpen","setDialogOpen","handleOpenDialog","handleCloseDialog","num","handleInputValue","setFunc","eventValue","min","max","useEffect","Promise","all","window","fetch","then","data","json","ultimo_aggiornamento","sort","a","b","ascending","order","Object","fromEntries","group","d","filter","deprecated","startDate","endDate","res","sum","numero_dosi","includes","fornitore","descending","data_somministrazione","ITA","Array","from","values","map","reduce","o","v","nome_area","totale","prima_dose","seconda_dose","vaccinati_monodose","vaccinati_doppiadose","vaccinati","currentDate","currentMonth","getMonth","rollups","slice","days","datetime","setDate","getDate","Math","round","total","console","log","Container","className","maxWidth","style","opacity","Grid","container","direction","justify","spacing","item","href","target","rel","src","onClick","nome","component","Select","value","length","onChange","e","MenuItem","toLowerCase","toString","TextField","onBlur","inputProps","type","step","InputProps","endAdornment","InputAdornment","position","remainingTime","duration","diff","years","months","s","join","replace","formatRemainingDays","m","i","toLocaleLowerCase","people","p","source","url","name","Box","alignContent","xs","Help","color","title","he","decode","encodeURIComponent","location","Twitter","Facebook","LinkedIn","Mail","InsertLink","Dialog","open","onClose","aria-labelledby","aria-describedby","DialogTitle","id","DialogContent","DialogContentText","width","DialogActions","Button","variant","autoFocus","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","theme","createMuiTheme","palette","primary","main","secondary","typography","fontFamily","overrides","MuiInput","root","padding","backgroundColor","MuiInputAdornment","fontSize","MuiDialogActions","justifyContent","marginLeft","ReactDOM","render","ReactRouterRoute","Route","ThemeProvider","document","getElementById"],"mappings":"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","file":"static/js/main.456f1df9.chunk.js","sourcesContent":["import { useEffect, useState } from 'react'\nimport he from 'he'\nimport dayjs from 'dayjs'\nimport Duration from 'dayjs/plugin/duration'\nimport 'dayjs/locale/it'\n\nimport {\n  useQueryParam,\n  NumberParam,\n  StringParam,\n  BooleanParam,\n  withDefault\n} from 'use-query-params'\n\nimport {\n  TextField,\n  InputAdornment,\n  Select,\n  MenuItem,\n  Container,\n  Grid,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n  Box\n} from '@material-ui/core'\n\nimport {\n  Facebook,\n  Help,\n  InsertLink,\n  LinkedIn,\n  Mail,\n  Twitter\n} from '@material-ui/icons'\n\nimport { rollups, group, sum, ascending, descending, filter } from 'd3-array'\nimport { formatLocale } from 'd3-format'\nimport { timeFormatLocale } from 'd3-time-format'\nimport numberItIT from 'd3-format/locale/it-IT.json'\nimport timeItIT from 'd3-time-format/locale/it-IT.json'\n\nimport './App.css'\n\nfunction App () {\n  const singleAdministrationVaccines = ['Janssen']\n\n  const numberLoc = formatLocale(numberItIT)\n  const fmtInt = numberLoc.format(',d')\n  const fmtPerc = numberLoc.format('.1%')\n\n  const timeLoc = timeFormatLocale(timeItIT)\n  const fmtDate = timeLoc.format('%A %e %B %Y')\n  const fmtMonthYear = timeLoc.format('%B %Y')\n  const fmtISODate = timeLoc.format('%Y-%m-%d')\n\n  dayjs.extend(Duration)\n  dayjs.locale('it')\n\n  // Embed mode\n  const [isEmbed/*, setEmbed */] = useQueryParam('embed', withDefault(BooleanParam, false))\n\n  // Daily data indexed by area\n  const [indexedData, setIndexedData] = useState({})\n  // Daily data per area\n  const [dataPerArea, setDataPerArea] = useState([])\n\n  // Population indexed by area\n  const [indexedPopulation, setIndexedPopulation] = useState({})\n  // Population per area\n  const [populationPerArea, setPopulationPerArea] = useState(6e7)\n  // Population fraction to be vaccinated (final goal)\n  const [populationFraction, setPopulationFraction] = useQueryParam('populationFraction', withDefault(NumberParam, 0.8))\n\n  // All available area\n  const [areas, setAreas] = useState([])\n  // Selected area\n  const [area, setArea] = useQueryParam('area', withDefault(StringParam, 'ITA'))\n\n  // Last data update\n  const [lastUpdate, setLastUpdate] = useState(new Date())\n  // Width of average time window\n  const [lastDays, setLastDays] = useQueryParam('lastDays', withDefault(NumberParam, 7))\n  // Selected milestone when population fraction will be vaccinated\n  const [lastDate, setLastDate] = useState(new Date())\n\n  // Delivered administrations\n  const [deliveredAdministrations, setDeliveredAdministrations] = useState(0)\n  const [deliveredAdministrations1, setDeliveredAdministrations1] = useState(0)\n  // const [deliveredAdministrations2, setDeliveredAdministrations2] = useState(0)\n\n  // Selected doses per person\n  const [requestedDoses, setRequestedDoses] = useQueryParam('doses', withDefault(NumberParam, 0))\n  const [doses, setDoses] = useState(2)\n\n  // Total number of administrations\n  const [administrations, setAdministrations] = useState(0)\n  // Total number of vaccinations (second dose administrations)\n  const [vaccinatedPeople, setVaccinatedPeople] = useState(0)\n  const [vaccinatedPeople1, setVaccinatedPeople1] = useState(0)\n  const [vaccinatedPeople2, setVaccinatedPeople2] = useState(0)\n  // Remaining administrations to final goal\n  const [remainingAdministrations, setRemainingAdministrations] = useState(0)\n  // Remaining days to final goal\n  // const [remainingDays, setRemainingDays] = useState(0)\n  // Rate of administrations\n  const [administrationsPerDay, setAdministrationsPerDay] = useState([])\n  // Rate of vaccinations (second dose administrations)\n  const [vaccinatedPeoplePerDay, setVaccinatedPeoplePerDay] = useState([])\n  // Average rate of administrations in last days\n  const [avgAdministrationsLastDays, setAvgAdministrationsLastDays] = useState(0)\n  // Average rate of vaccinations in last days\n  const [avgVaccinatedPeopleLastDays, setAvgVaccinatedPeopleLastDays] = useState(0)\n  // Selected final goal month\n  const [targetMonth, setTargetMonth] = useQueryParam('targetMonth', withDefault(NumberParam, 8))\n  // Selected final goal year\n  const [targetYear, setTargetYear] = useQueryParam('targetYear', withDefault(NumberParam, (new Date()).getFullYear()))\n  // Selected final goal date\n  const [targetDate, setTargetDate] = useState(new Date())\n  // Average rate of administrations to reach the final goal within selected date\n  const [targetAvgAdministrationsPerDay, setTargetAvgAdministrationsPerDay] = useState(0)\n\n  // Next milestone\n  const [nextMilestone, setNextMilestone] = useState({})\n  // Remaining days to next milestone\n  const [nextMilestoneRemainingDays, setNextMilestoneRemainingDays] = useState(0)\n  // Remaining administrations to next milestone\n  const [nextMilestoneRemainingAdministrations, setNextMilestoneRemainingAdministrations] = useState(0)\n  // Rate required for the next milestone\n  const [nextMilestoneTargetAvgAdministrationsPerDay, setNextMilestoneTargetAvgAdministrationsPerDay] = useState(0)\n\n  const [isReady, setIsReady] = useState(false)\n  const [dialogOpen, setDialogOpen] = useState(false)\n\n  function handleOpenDialog () {\n    setDialogOpen(true)\n  }\n\n  function handleCloseDialog () {\n    setDialogOpen(false)\n  }\n\n  const handleInputValue = (setFunc, eventValue, min, max) => {\n    const value = eventValue > max ? max : eventValue < min ? min : eventValue\n    setFunc(value)\n  }\n\n  const formatRemainingDays = (lastDate) => {\n    const remainingTime = dayjs.duration(dayjs(lastDate).diff(dayjs()))\n    const years = remainingTime.years() ? `${remainingTime.years()} ann${remainingTime.years() === 1 ? 'o' : 'i'}` : ''\n    const months = remainingTime.months() ? `${remainingTime.months()} mes${remainingTime.months() === 1 ? 'e' : 'i'}` : ''\n    const days = remainingTime.days() ? `${remainingTime.days()} giorn${remainingTime.days() === 1 ? 'o' : 'i'}` : ''\n    return [years, months, days].filter(s => s).join(', ').replace(/, ([^,]*)$/, ' e $1')\n  }\n\n  const formatNumberArticle = (num) => {\n    if ((num).toString().slice(0, 1) === '8') {\n      return \"l'\"\n    } else {\n      return 'il '\n    }\n  }\n\n  // Download all requested data on page load\n  useEffect(() => {\n    Promise.all([\n      window.fetch('../vaccinipertutti-data/last-update-dataset.json')\n        .then(data => data.json())\n        .then(data => { setLastUpdate(new Date(data.ultimo_aggiornamento)) }),\n      window.fetch('../vaccinipertutti-data/popolazione_residente_2021.json?latest')\n        .then(data => data.json())\n        .then(data => data.sort((a, b) => ascending(a.order, b.order)))\n        .then(data => {\n          setAreas(data)\n          setIndexedPopulation(Object.fromEntries(group(data, d => d.area)))\n        }),\n      window.fetch('../vaccinipertutti-data/campaign-milestones.json')\n        .then(data => data.json())\n        .then(data => data.filter(d => !d.deprecated))\n        .then(data => data.sort((a, b) => ascending(a.startDate, b.startDate)))\n        .then(data => data.filter(d => (new Date(d.startDate) < new Date()) && (new Date(d.endDate) > new Date())))\n        .then(data => { setNextMilestone(data?.[0]) }),\n      window.fetch('../vaccinipertutti-data/consegne-vaccini-latest.json')\n        .then(res => res.json())\n        .then(res => res.data)\n        .then(data => {\n          setDeliveredAdministrations(sum(data, d => d.numero_dosi))\n          setDeliveredAdministrations1(sum(filter(data, d => singleAdministrationVaccines.includes(d.fornitore)), d => d.numero_dosi))\n          // setDeliveredAdministrations2(sum(filter(data, d => !singleAdministrationVaccines.includes(d.fornitore)), d => d.numero_dosi))\n        }),\n      window.fetch('../vaccinipertutti-data/somministrazioni-vaccini-latest.json')\n        .then(res => res.json())\n        .then(res => res.data)\n        .then(data => data.filter(d => d.area !== 'ITA'))\n        .then(data => data.sort((a, b) => descending(a.data_somministrazione, b.data_somministrazione)))\n        .then(data => {\n          setIndexedData({\n            ITA: Array\n              .from(group(data, d => d.data_somministrazione).values())\n              .map(d => d.reduce(\n                (o, v) => ({\n                  area: 'ITA',\n                  nome_area: 'Italia',\n                  data_somministrazione: v.data_somministrazione,\n                  totale: (o.totale ?? 0) + (v.totale || (v.prima_dose + v.seconda_dose)),\n                  prima_dose: (o.prima_dose ?? 0) + v.prima_dose,\n                  seconda_dose: (o.seconda_dose ?? 0) + v.seconda_dose,\n                  vaccinati_monodose: (o.vaccinati_monodose ?? 0) + (singleAdministrationVaccines.includes(v.fornitore) ? v.prima_dose : 0),\n                  vaccinati_doppiadose: (o.vaccinati_doppiadose ?? 0) + v.seconda_dose,\n                  vaccinati: (o.vaccinati ?? 0) + (singleAdministrationVaccines.includes(v.fornitore) ? v.prima_dose : 0) + v.seconda_dose\n                }),\n                {})\n              ),\n            ...Object.fromEntries(group(data, d => d.area))\n          })\n        })\n    ]).then(() => { setIsReady(true) })\n  }, [])\n\n  // On user selection of month and year of final goal, compute full date\n  useEffect(() => {\n    const currentDate = new Date()\n    const currentMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0)\n    const selectedMonth = new Date(targetYear, targetMonth + 1, 0)\n\n    // Check to avoid selection of past months\n    if (selectedMonth > currentMonth) {\n      setTargetDate(new Date(targetYear, targetMonth + 1, 0))\n    } else {\n      setTargetMonth(targetDate.getMonth())\n      setTargetYear(targetDate.getFullYear())\n    }\n  }, [targetMonth, targetYear])\n\n  // On user selection of area, update administrations data per area\n  useEffect(() => {\n    setDataPerArea(\n      indexedData[area]\n        ? (\n            area === 'ITA'\n              ? indexedData[area]\n              : (\n                  Array\n                    .from(group(indexedData[area], d => d.data_somministrazione).values())\n                    .map(d => d.reduce(\n                      (o, v) => ({\n                        area: v.area,\n                        nome_area: v.nome_area,\n                        data_somministrazione: v.data_somministrazione,\n                        totale: (o.totale ?? 0) + (v.totale || (v.prima_dose + v.seconda_dose)),\n                        prima_dose: (o.prima_dose ?? 0) + v.prima_dose,\n                        seconda_dose: (o.seconda_dose ?? 0) + v.seconda_dose,\n                        vaccinati_monodose: (o.vaccinati_monodose ?? 0) + (singleAdministrationVaccines.includes(v.fornitore) ? v.prima_dose : 0),\n                        vaccinati_doppiadose: (o.vaccinati_doppiadose ?? 0) + v.seconda_dose,\n                        vaccinati: (o.vaccinati ?? 0) + (singleAdministrationVaccines.includes(v.fornitore) ? v.prima_dose : 0) + v.seconda_dose\n                      }),\n                      {})\n                    )\n                )\n          )\n        : []\n    )\n  }, [indexedData, area])\n\n  useEffect(() => {\n    if (requestedDoses) {\n      setDoses(requestedDoses)\n    } else if (deliveredAdministrations) {\n      setDoses(2 - (deliveredAdministrations1 / deliveredAdministrations))\n    }\n  }, [deliveredAdministrations, deliveredAdministrations1, requestedDoses])\n\n  // On user selection of area, update population per area\n  useEffect(() => {\n    if (indexedPopulation[area]) {\n      setPopulationPerArea(indexedPopulation[area][0].totale)\n    }\n  }, [indexedPopulation, area])\n\n  useEffect(() => {\n    // Compute partial aggregation (sum of administrations) per day\n    setAdministrationsPerDay(\n      rollups(\n        dataPerArea,\n        v => sum(v, d => d.totale),\n        d => fmtISODate(new Date(d.data_somministrazione))\n      )\n    )\n\n    // Compute partial aggregation (sum of vaccinated people) per day\n    setVaccinatedPeoplePerDay(\n      rollups(\n        dataPerArea,\n        v => sum(v, d => d.vaccinati),\n        d => fmtISODate(new Date(d.data_somministrazione))\n      )\n    )\n\n    // Update total administrations\n    setAdministrations(\n      sum(dataPerArea, d => d.totale)\n    )\n\n    // Update total vaccinated people\n    setVaccinatedPeople(\n      sum(dataPerArea, d => d.vaccinati)\n    )\n\n    // Update total vaccinated people with single administration\n    setVaccinatedPeople1(\n      sum(dataPerArea, d => d.vaccinati_monodose)\n    )\n\n    // Update total vaccinated people with double administration\n    setVaccinatedPeople2(\n      sum(dataPerArea, d => d.vaccinati_doppiadose)\n    )\n  }, [dataPerArea])\n\n  // Compute average rate of administrations to reach the final goal within selected date\n  useEffect(() => {\n    setTargetAvgAdministrationsPerDay(remainingAdministrations / (targetDate - (new Date())) * 1000 * 60 * 60 * 24)\n  }, [targetDate, remainingAdministrations])\n\n  // Compute administrations rate in last days, filtering out today administrations to avoid underestimation\n  useEffect(() => {\n    setAvgAdministrationsLastDays(\n      sum(\n        administrationsPerDay.filter(d => d[0] !== fmtISODate(new Date())).slice(0, lastDays),\n        d => d[1]\n      ) / lastDays\n    )\n  }, [administrationsPerDay, lastDays])\n\n  // Compute vaccinated people rate in last days, filtering out today administrations to avoid underestimation\n  useEffect(() => {\n    setAvgVaccinatedPeopleLastDays(\n      sum(\n        vaccinatedPeoplePerDay.filter(d => d[0] !== fmtISODate(new Date())).slice(0, lastDays),\n        d => d[1]\n      ) / lastDays\n    )\n  }, [vaccinatedPeoplePerDay, lastDays])\n\n  // Compute remaining administrations for final goal\n  useEffect(() => {\n    setRemainingAdministrations(\n      doses * populationPerArea * populationFraction - administrations\n    )\n  }, [doses, populationPerArea, populationFraction, administrations])\n\n  // Compute remaining days and date of final goal\n  useEffect(() => {\n    const days = remainingAdministrations / avgAdministrationsLastDays\n    const datetime = new Date()\n    datetime.setDate(datetime.getDate() + Math.round(days))\n    // setRemainingDays(days)\n    setLastDate(datetime)\n  }, [remainingAdministrations, avgAdministrationsLastDays])\n\n  // Compute remaining days and administrations for next milestone\n  useEffect(() => {\n    setNextMilestoneRemainingDays((new Date(nextMilestone.endDate) - new Date()) / (1000 * 60 * 60 * 24))\n    setNextMilestoneRemainingAdministrations((doses * nextMilestone.total) - administrations)\n  }, [doses, nextMilestone, administrations])\n\n  // Compute requested average rate of administrations to reach next milestone\n  useEffect(() => {\n    setNextMilestoneTargetAvgAdministrationsPerDay(nextMilestoneRemainingAdministrations / nextMilestoneRemainingDays)\n  }, [nextMilestoneRemainingAdministrations, nextMilestoneRemainingDays])\n\n  console.log(indexedData, vaccinatedPeople1)\n  return (\n    <>\n      <Container className={`container ${isEmbed ? 'slim' : 'boxed'}`} maxWidth='md' style={{ opacity: +isReady }}>\n        <Grid container direction='column' justify='center' spacing={2}>\n          <Grid item className='footerText'>\n            <a href='https://ondata.it' target='_blank' rel='noreferrer'><img src='ondata.png' className='logo small' /></a>\n            <a href='http://www.datibenecomune.it' target='_blank' rel='noreferrer'><img src='datibenecomune.png' className='logo small' /></a>\n          </Grid>\n          <Grid item className='footerText'>\n            Che cos'è questa pagina? <a href='#' onClick={handleOpenDialog}>Leggi qui!</a>\n          </Grid>\n          <Grid item className='supTitle'>Termine previsto della campagna vaccinale in <em>{indexedPopulation[area]?.[0]?.nome}</em> contro Sars-CoV-2.</Grid>\n          <Grid item component='h1' className='mainTitle'>{fmtDate(lastDate)}</Grid>\n          <Grid item className='footerText'>\n            Come abbiamo calcolato questa data? <a href='https://github.com/ondata/vaccinipertutti/blob/main/README.md#le-stime' target='_blank' rel='noreferrer'>Ecco tutte le info!</a>\n          </Grid>\n          <Grid item className='mainText'>\n            In <Select value={areas.length ? area : ''} onChange={e => setArea(e.target.value)}>{areas.map(a => <MenuItem key={a.area} value={a.area}>{a.nome}</MenuItem>)}</Select> si è iniziato a somministrare il primo vaccino il <em>27 dicembre 2020</em>.\n            A {lastUpdate.getDate() === (new Date()).getDate() ? 'oggi' : 'ieri'}, <em>{fmtDate(lastUpdate).toLowerCase()}</em>, sono state somministrate <em>{fmtInt(administrations)}</em> dosi,\n            ma ne mancano <em>{fmtInt(remainingAdministrations)}</em> per vaccinare {formatNumberArticle(populationFraction * 100)}<TextField value={populationFraction * 100} onChange={e => setPopulationFraction(+e.target.value / 100)} onBlur={e => handleInputValue(setPopulationFraction, +e.target.value / 100, 0.6, 1)} inputProps={{ type: 'number', min: 60, max: 100, step: 5 }} InputProps={{ endAdornment: <InputAdornment position='end'>%</InputAdornment> }} /> della popolazione\n            con una media di circa <TextField value={Math.round(doses * 10) / 10} onChange={e => { setDoses(+e.target.value); setRequestedDoses(+e.target.value) }} onBlur={e => handleInputValue(setDoses, +e.target.value, 1, 2)} inputProps={{ type: 'number', min: 1, max: 2, step: 0.1 }} /> dosi a testa\n            {!!deliveredAdministrations1 && <> (<em>{fmtPerc(1 - deliveredAdministrations1 / deliveredAdministrations)}</em> con doppia dose e <em>{fmtPerc(deliveredAdministrations1 / deliveredAdministrations)}</em> monodose, in base alle attuali forniture nazionali)</>}.\n          </Grid>\n          <Grid item className='mainText'>\n            Al ritmo di <em>{fmtInt(avgAdministrationsLastDays)}</em> somministrazioni al giorno tenuto negli ultimi <TextField value={lastDays} onChange={e => setLastDays(+e.target.value)} onBlur={e => handleInputValue(setLastDays, +e.target.value, 1, administrationsPerDay.length)} inputProps={{ type: 'number', min: 1, max: administrationsPerDay.length, step: 1 }} /> giorni,\n            mancano circa <em>{formatRemainingDays(lastDate)}</em> prima di raggiungere l'obiettivo.\n            Per farlo entro <Select value={targetMonth} onChange={e => setTargetMonth(+e.target.value)}>{timeItIT.months.map((m, i) => <MenuItem key={i} value={i}>{m.toLocaleLowerCase()}</MenuItem>)}</Select> <TextField value={targetYear} onChange={e => setTargetYear(+e.target.value)} onBlur={e => handleInputValue(setTargetYear, +e.target.value, (new Date()).getFullYear(), 2030)} inputProps={{ type: 'number', min: (new Date()).getFullYear(), max: 2030, step: 1 }} /> {avgAdministrationsLastDays > targetAvgAdministrationsPerDay ? 'basterebbe' : 'bisognerebbe'} somministrare una media di <em>{fmtInt(targetAvgAdministrationsPerDay)}</em> dosi al giorno.\n          </Grid>\n          <Grid item className='mainText'>\n            Attualmente le persone vaccinate sono <em>{fmtInt(vaccinatedPeople)}</em> ({!!vaccinatedPeople1 && <><em>{fmtInt(vaccinatedPeople2)}</em> con doppia dose e <em>{fmtInt(vaccinatedPeople1)}</em> monodose, </>}una media di <em>{fmtInt(avgVaccinatedPeopleLastDays)}</em> al giorno), pari al <em>{fmtPerc(vaccinatedPeople / (populationFraction * populationPerArea))}</em> dell'obiettivo di copertura vaccinale della popolazione.\n          </Grid>\n          {\n            area === 'ITA'\n              ? (\n                  nextMilestoneTargetAvgAdministrationsPerDay < avgAdministrationsLastDays\n                    ? (\n                      <Grid item className='mainText'>\n                        Il ritmo attuale è in linea con il prossimo obiettivo di vaccinare <em>{fmtInt(nextMilestone.total)}</em> persone ({nextMilestone.people?.map(p => p.type).join(', ')}) entro <em>{fmtMonthYear(new Date(nextMilestone.endDate))}</em>.\n                      </Grid>\n                      )\n                    : (\n                      <Grid item className='mainText'>\n                        Il ritmo attuale dovrebbe aumentare del <em>{fmtPerc((nextMilestoneTargetAvgAdministrationsPerDay - avgAdministrationsLastDays) / nextMilestoneTargetAvgAdministrationsPerDay)}</em> per raggiungere il prossimo obiettivo di vaccinare <em>{fmtInt(nextMilestone.total)}</em> persone ({nextMilestone.people?.map(p => p.type).join(', ')}) entro <em>{fmtMonthYear(new Date(nextMilestone.endDate))}</em> (fonte: <a href={nextMilestone?.source?.url} target='_blank' rel='noreferrer'>{nextMilestone?.source?.name}</a>).\n                      </Grid>\n                      )\n                )\n              : null\n          }\n          <Grid item className='footerText'>\n            <img src='syringe.png' className='syringe large' />\n          </Grid>\n          <Grid item className='footerText'>\n            Un progetto a cura dell'<a href='https://ondata.it' target='_blank' rel='noreferrer'>Associazione onData</a>.\n          </Grid>\n          <Grid item className='footerText'>\n            Perché l'abbiamo fatto? <a href='https://github.com/ondata/vaccinipertutti/blob/main/README.md#frequently-asked-question-faq' target='_blank' rel='noreferrer'>Scoprilo!</a>\n          </Grid>\n          <Grid item className='footerText'>\n            E se ti piace, sottoscrivi la campagna <a href='https://datibenecomune.it/' target='_blank' rel='noreferrer'>#datiBeneComune</a>!\n          </Grid>\n          {\n            isEmbed || (\n              <>\n                <Box className='Flower lt' />\n                <Box className='Flower lb' />\n                <Box className='Cube rt icon'>\n                  <Grid container justify='center' alignContent='center' direction='column'>\n                    <Grid item xs><Help color='primary' onClick={handleOpenDialog} /></Grid>\n                    <Grid item xs><a title='Condividi su Twitter' href={`https://twitter.com/share?text=\"${he.decode(`Termine previsto della campagna vaccinale in ${indexedPopulation[area]?.[0]?.nome} contro Sars-CoV-2: ${fmtDate(lastDate)}`)}\" via @ondatait&hashtags=datiBeneComune&url=${encodeURIComponent(window.location.href)}`} target='_blank' rel='noreferrer'><Twitter color='primary' /></a></Grid>\n                    <Grid item xs><a title='Condividi su Facebook' href={`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&hashtag=${encodeURIComponent('#datiBeneComune')}`} target='_blank' rel='noreferrer'><Facebook color='primary' /></a></Grid>\n                    <Grid item xs><a title='Condividi su LinkedIn' href={`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(window.location.href)}`} target='_blank' rel='noreferrer'><LinkedIn color='primary' /></a></Grid>\n                    <Grid item xs><a title='Condividi via e-mail' href={`mailto:?subject=\"${he.decode(`#datiBeneComune - Termine previsto della campagna vaccinale in ${indexedPopulation[area]?.[0]?.nome} contro Sars-CoV-2: ${fmtDate(lastDate)}`)}\" via onData - APS&body=${he.decode(`In ${indexedPopulation[area]?.[0]?.nome} si è iniziato a somministrare il primo vaccino il 27 dicembre 2020`)}... Continua a leggere su ${encodeURIComponent(window.location.href)}`} target='_blank' rel='noreferrer'><Mail color='primary' /></a></Grid>\n                    <Grid item xs><a title='Permalink' href={window.location.href} target='_blank' rel='noreferrer'><InsertLink color='primary' /></a></Grid>\n                  </Grid>\n                </Box>\n                <Box className='Flower rb' />\n              </>\n            )\n          }\n        </Grid>\n      </Container>\n      <Dialog\n        open={dialogOpen}\n        onClose={handleCloseDialog}\n        aria-labelledby='alert-dialog-title'\n        aria-describedby='alert-dialog-description'\n      >\n        <DialogTitle id='alert-dialog-title'>\"Vaccini per tutti\" by onData</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            \"Vaccini per tutti\" è un'<b>applicazione sperimentale non ufficiale</b> che permette di stimare i tempi di avanzamento della campagna di vaccinazione in Italia sulla base degli open data istituzionali del <a href='https://github.com/italia/covid19-opendata-vaccini/' target='_blank' rel='noreferrer'>Commissario straordinario per l'emergenza Covid-19 - Presidenza del Consiglio dei Ministri</a>, dell'<a href='https://www.epicentro.iss.it/vaccini/covid-19-piano-vaccinazione' target='_blank' rel='noreferrer'>Istituto Superiore di Sanità</a> e di <a href='http://demo.istat.it/popres/index2.php?anno=2021&lingua=ita' target='_blank' rel='noreferrer'>ISTAT</a>.\n          </DialogContentText>\n          <DialogContentText>\n            <img width='100%' src='card.png' />\n          </DialogContentText>\n          <DialogContentText>\n            Come funziona? In base all'andamento della campagna di vaccinazione (quante somministrazioni effettuate in Italia nei giorni passati) stimiamo quanto tempo resta per raggiungere gli obiettivi di copertura vaccinale della popolazione generale e di quella dei soggetti ad alta priorità, così come definiti nel <a href='https://www.epicentro.iss.it/vaccini/covid-19-piano-vaccinazione' target='_blank' rel='noreferrer'>primo</a> e <a href='https://www.governo.it/sites/governo.it/files/210313_Piano_Vaccinale_marzo_2021.pdf' target='_blank' rel='noreferrer'>secondo</a> piano nazionale di vaccinazione.\n            Puoi modificare i parametri che influiscono sul calcolo, prova a interagire con i numeri su <em className='bg'>sfondo colorato</em> ed esplora tutti gli scenari possibili. Trovi ulteriori dettagli in <a href='https://github.com/ondata/vaccinipertutti/blob/main/README.md#le-stime' target='_blank' rel='noreferrer'>questa pagina</a>.\n          </DialogContentText>\n          <DialogContentText>\n            Per approfondire le motivazioni dietro lo sviluppo di questo lavoro, il significato e i limiti dei dati a disposizione, le modalità di calcolo e l'affidabilità delle stime presentate puoi leggere le nostre <a href='https://github.com/ondata/vaccinipertutti/blob/main/README.md#frequently-asked-question-faq' target='_blank' rel='noreferrer'>FAQ</a> (Frequently Asked Questions).\n          </DialogContentText>\n          <DialogContentText>\n            Se hai un dubbio o vuoi fare una segnalazione, puoi <a href='https://github.com/ondata/vaccinipertutti/issues' target='_blank' rel='noreferrer'>aprire una issue</a>.\n          </DialogContentText>\n          <DialogContentText>\n            Tutte le informazioni contenute in questa pagina sono da prendersi <a href='https://en.wikipedia.org/wiki/As_is' target='_blank' rel='noreferrer'>così come sono</a>, senza nessuna garanzia di correttezza o pretesa di affidabilità.\n            I dati sottostanti sono aggiornati quotidianamente dalle fonti indicate e le stime cambiano quindi ogni giorno seguendo l'andamento della campagna vaccinale.\n          </DialogContentText>\n          <DialogContentText>\n            L'applicazione è sviluppata e mantenuta da <a href='https://github.com/jenkin' target='_blank' rel='noreferrer'>jenkin</a> per <a href='https://ondata.it/' target='_blank' rel='noreferrer'>onData APS</a>, associazione di promozione sociale che promuove l'apertura dei dati pubblici per renderli accessibili a tutte e tutti.\n          </DialogContentText>\n          <DialogContentText>\n            Il codice sorgente è open source e rilasciato sotto <a href='https://tldrlegal.com/license/mit-license' target='_blank' rel='noreferrer'>licenza MIT</a> su Github: <a href='https://github.com/ondata/vaccinipertutti' target='_blank' rel='noreferrer'>ondata/vaccinipertutti</a>. Questa pagina è ospitata dal servizio <a href='https://pages.github.com/' target='_blank' rel='noreferrer'>Github Pages</a> e fa esclusivamente uso di cookie tecnici: non traccia né profila in alcun modo gli utenti.\n          </DialogContentText>\n          <DialogContentText>\n            Puoi sostenere l'attività di onData in molti modi, <a href='https://sostieni.ondata.it/' target='_blank' rel='noreferrer'>dai un'occhiata</a>!\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions justify='flex-start'>\n          <Button color='primary' href='https://datibenecomune.it/' target='_blank' rel='noreferrer'>\n            Sottoscrivi la campagna #datiBeneComune\n          </Button>\n          <Button onClick={handleCloseDialog} color='secondary' variant='contained' autoFocus>\n            Ho capito, grazie!\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\nimport { QueryParamProvider } from 'use-query-params'\n\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles'\n\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: 'rgba(0, 0, 0, 0.87)'\n    },\n    secondary: {\n      main: '#e82f7d'\n    }\n  },\n  typography: {\n    fontFamily: [\n      '\"Titillium Web\"',\n      'sans-serif'\n    ]\n  },\n  overrides: {\n    MuiInput: {\n      root: {\n        padding: '0 .5em',\n        backgroundColor: '#e82f7d',\n        color: 'white'\n      }\n    },\n    MuiInputAdornment: {\n      root: {\n        '& > *': {\n          color: 'white !important',\n          fontSize: '1.5rem'\n        }\n      }\n    },\n    MuiDialogActions: {\n      root: {\n        justifyContent: 'flex-start',\n        '& > *:last-child': {\n          marginLeft: 'auto !important'\n        }\n      }\n    }\n  }\n})\n\nReactDOM.render(\n  <Router>\n    <QueryParamProvider ReactRouterRoute={Route}>\n      <ThemeProvider theme={theme}>\n        <App />\n      </ThemeProvider>\n    </QueryParamProvider>\n  </Router>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}